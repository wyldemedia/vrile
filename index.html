<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q22KZ1Y1M1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q22KZ1Y1M1');
</script>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Meta Description -->
  <meta name="description" content="Unlock peace and relaxation with our Meditations, Sleep, and Mindfulness app. Enjoy guided sessions to reduce stress, improve sleep, and enhance mental well-being. Download now to start your journey to a calmer, more mindful life.">
  <title>Sensual Pleasure and Erotic Fantasies</title>

  <!-- icofont-css-link -->
  <link rel="stylesheet" href="css/icofont.min.css">
  <!-- Owl-Carosal-Style-link -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <!-- Bootstrap-Style-link -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Aos-Style-link -->
  <link rel="stylesheet" href="css/aos.css">
  <!-- Coustome-Style-link -->
  <link rel="stylesheet" href="css/style.css">
  <!-- Responsive-Style-link -->
  <link rel="stylesheet" href="css/responsive.css">
  <!-- Favicon -->
  <link rel="shortcut icon" href="images/favicon.webp" type="image/x-icon">
  <!-- font 1 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Elsie:wght@400;900&display=swap" rel="stylesheet">
  <!-- font 2 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">

</head>

<body>

  <!-- Preloader -->
  <div id="preloader">
    <div id="loader"></div>
  </div>


  <section class = "back_cover">
  <!-- Header Start -->
  <header>
    <!-- container start -->
    <div class="container">
      <!-- navigation bar -->
      <nav class="navbar navbar-expand-lg">
        <a class="navbar-brand" href="index.html">
          <img src="images/Vrile-masthead.png" alt="Logo">
        </a>  
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon">
            <!-- <i class="icofont-navigation-menu ico_menu"></i> -->
            <span class="toggle-wrap">
              <span class="toggle-bar"></span>
            </span>
          </span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
           
            <li class="nav-item">
              <div class="btn_block">
                <a class="nav-link dark_btn" href="https://sensualawakenings.today/download.php">Transform Your Pleasure - $17.99</a>
               

              </div>
            </li>
          </ul>
        </div>
      </nav>
      <!-- navigation end -->
    </div>
    <!-- container end -->
  </header>

  

  <!-- Banner-Section-Start -->
  <section class="banner_section" id="home_sec">
    <!-- container start -->
    <div class="container">

       <section class="row_am usp_section">
      <div class="inner_sec">
        <!-- container start -->
          <div class="container">
            <!-- row start -->
            <div class="row">
              <!-- box 1 -->
              
                <h1>Last Longer Tonight</h1>
             

            </div>
            
          </div>
      </div>
    </section>
      <!-- row start -->
      <div class="row">
        <div class="col-lg-6 col-md-12" data-aos="fade-up" data-aos-duration="1500">
          <!-- banner text -->
          <div class="banner_text">
            <!-- typed text -->
            <div class="type-wrap">
              <!-- add static words/sentences here (i.e. text that you don't want to be removed)-->
              <span id="typed" style="white-space:pre;" class="typed">
              </span>
            </div>

            <!-- h1 -->
            <h2> Regain Control. <br />
              Reclaim Confidence.<br/> Reignite Satisfaction. <br/> Your Journey to Lasting Intimacy Starts Here</h2>
            <!-- p -->
            <p>
            No pills, no medication—just a proven 4-part audio program using hypnosis to shift your mindset and discover lasting control and confidence in intimate moments.
            </p>

             <ul class="app_btn">
            <li>
              <div class="btn_block">
                <a class="nav-link dark_btn" href="https://sensualawakenings.today/download.php">Intensify Your Pleasure</a>
               

              </div>
              

            </li>
            
            
          </ul> 

          </div>
          </div>

          <!-- app buttons -->
       
      

   

        <!-- banner image start -->
        <div class="col-lg-6 col-md-12" >

          <div class="hero_img">
            <img src="images/cover shot.webp" alt="image">

          </div>
        </div>
        <!-- banner image end -->

      </div>
      <!-- row end -->
    </div>
    <!-- container end -->
  </section>
  <!-- Banner-Section-end -->

  </section>

  <!-- Page Wraper -->
  <div class="page_wrapper">

    <!-- usp start -->
   

    <!-- programs start -->
    <section class="row_am program_section">      
      

        <!-- container start -->
          <div class="container">

<p class="usp_description">As men we are constantly barraged about what the perfect man should be. 

<br/>The washboard abs, that chest you could break stones on. And of course, the oversized erection, that is always hard and can last all night.  <br /> These messages are toxic and only create an epidemic of men who suffer with Premature Ejaculation. 

<br />You’re not alone, and there’s a natural, effective way to take back control— <em>without medication, side effects, or complicated routines.</em></p>            


<p class="usp_description">

Shifting your mindset and freeing you from the pressures of these messages, you can once again be empowered to re-discover the confident, passionate and virile man you are. 
<br />

<strong>Take the first step toward a more fulfilling and confident intimate life—naturally.</strong></p>
<div class="section_title" data-aos="fade-up" data-aos-duration="1500" data-aos-delay="100">
            <span class="title_badge">Last Longer Naturally</span>
            <!-- h2 -->
            <h2>Rediscover Satisfaction</h2>
            <!-- p -->
            <p>Our 4-part program is designed to help you regain control, rebuild confidence, and reignite satisfaction in your intimate moments. Each audio session is crafted to guide you through relaxation, focus, and mental conditioning techniques that empower you to last longer naturally.</p> 
            
          </div>

          <!-- blocks -->
          <div class="program_blocks">
            <!-- row -->
            <div class="row">

              <!-- block -->
              <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6">
                <div class="program_box">
                  <div class="program_icon"><img src="images/Vrile-blue-icon.webp" alt="image"></div>
                  <div class="program_text">Release Tension</div>   
                  <div class="program_description"> As the #1 passion killer, tension can be a major barrier to pleasure. Our program helps you identify and release this tension, paving the way for deeper intimacy and satisfaction.  </div>               
                </div>
              </div>

              <!-- block -->
              <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6">
                <div class="program_box">
                  <div class="program_icon"><img src="images/Vrile-blue-icon.webp" alt="image"></div>
                  <div class="program_text">Rebuild Sexual Confidence</div>  
                  <div class="program_description">By learning to release those toxic messages you can rebuild your confidence, inside and outside the bedroom. </div> 

                </div>
              </div>

                <!-- block -->
              <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6">
                <div class="program_box">
                  <div class="program_icon"><img src="images/Vrile-blue-icon.webp" alt="image"></div>
                  <div class="program_text">Regain Control</div>      
                  <div class="program_description">Reconnect with your body so it responds in the way you want, when you want. </div>            
                </div>
              </div>


              <!-- block -->
              <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6">
                <div class="program_box">
                  <div class="program_icon"><img src="images/Vrile-blue-icon.webp" alt="image"></div>
                  <div class="program_text">Discover Your Authentic Passion</div>             
                  <div class="program_description"> Once you release yourself from the man they pressure you to be, you can enjoy being the man you are. Authentic, strong, pasisonate.</div> 

                </div>
              </div>

            
             

             

            </div>
          </div>
          </div>
    </section>

    <section class="row_am devider"> <img src="images/devider.webp" alt="image"> </section>

    <!-- Features-Section-Start -->
    <section class="row_am features_section" id="why_sec">
      <!-- container start -->
      <div class="container">
        <div class="section_title" data-aos="fade-up" data-aos-duration="1500" data-aos-delay="100">
          <span class="title_badge">Why enjoy Riding the Edge</span>
          <!-- h2 -->
          <h2>Transform minutes into moments of ecstasy</h2>
          <!-- p -->
          <p></p>
        </div>
        <div class="feature_detail">
          <!-- feature box left -->
          <div class="left_data feature_box">

            <!-- feature box -->
            <div class="data_block color1" data-aos="fade-right" data-aos-duration="1500">
              <div class="icon">
                <img src="images/Vrile-blue-icon.webp" alt="image" >
              </div>
              <div class="text">
                <h6>Grow Your Sensual Confidence</h6>
                <p>Every audio session has been crafted to escape limiting beliefs while enjoying enhanced sensuality .</p>
              </div>
            </div>

            <!-- feature box -->
            <div class="data_block color2" data-aos="fade-right" data-aos-duration="1500">
              <div class="icon">
                <img src="images/Vrile-blue-icon.webp" alt="image" >
              </div>
              <div class="text">
                <h6>Discover Lasting Control</h6>
                <p>Transform your pleasure into lasting control, without having to think about it.</p>
              </div>
            </div>
         

           <div class="data_block color2" data-aos="fade-right" data-aos-duration="1500">
              <div class="icon">
                <img src="images/Vrile-blue-icon.webp" alt="image" >
              </div>
              <div class="text">
                <h6>Deepen Intimacy</h6>
                <p>Find a new level of connection with your partner that leaves you both satisfied</p>
              </div>
            </div>
          </div>

          <!-- feature box right -->
          <div class="right_data feature_box">

            <!-- feature box -->
            <div class="data_block color3" data-aos="fade-left" data-aos-duration="1500">
              <div class="icon">
                <img src="images/Vrile-blue-icon.webp" alt="image" >
              </div>
              <div class="text">
                <h6>Release Anxiety</h6>
                <p>Discover a stress-free pleasure, you don't even need to try for. </p>
              </div>
            </div>

            <!-- feature box -->
            <div class="data_block color4" data-aos="fade-left" data-aos-duration="1500">
              <div class="icon">
                <img src="images/Vrile-blue-icon.webp" alt="image" >
              </div>
              <div class="text">
                <h6>Be your authentic self</h6>
                <p>Experience the freedom to explore your desires without judgment or limitation. </p>
              </div>
           

          </div>
          <div class="data_block color4" data-aos="fade-left" data-aos-duration="1500">
              <div class="icon">
                <img src="images/Vrile-blue-icon.webp" alt="image" >
              </div>
              <div class="text">
                <h6>All medication free</h6>
                <p>No risks or side effects. No pills to pop. Just natural pleasure.  </p>
              </div>
            </div>

          </div>
          <!-- feature image -->
          <div class="feature_img" data-aos="fade-up" data-aos-duration="1500" data-aos-delay="100">
            <img src="images/cover shot.webp" alt="image" >
          </div>
        </div>
      </div>
      <!-- container end -->
    </section>
    <!-- Features-Section-end -->

   <section class="advance_feature_section row_am" id="how_work_sec">
      <div class="af_innner">
        <div class="container">

            <div class="section_title howto" >
              <span class="title_badge">3 Steps To Lasting Longer</span>
              <h2>Getting The Most From Ride The Edge</h2>
              <p>Follow these simple steps to enhance your experience with Ride The Edge.</p>
            </div>

            <!-- listing -->
            <div class="af_listing">
              <!-- row -->
              <div class="row">

                <div class="col-md-12">

                  <div class="listing_inner">
                    <!-- blok -->
                    <div class="af_block" data-aos="fade-up" data-aos-duration="1500">
                        <div class="img">
                          <img src="images/Vrile-blue-icon.webp" alt="image">
                        </div>
                        <div class="text">
                          <h5>Make Time For Yourself</h5>
                          <p> Prioritize your pleasure and set aside time for self-exploration and transforming your experience. 20 minutes a day initially is usually more than enough</p>
                        </div>
                        <div class="process_num">01</div>
                    </div>

                    <!-- blok -->
                    <div class="af_block" data-aos="fade-up" data-aos-duration="1500">
                        <div class="img">
                          <img src="images/Vrile-blue-icon.webp" alt="image">
                        </div>
                        <div class="text">
                          <h5> Go With The Flow </h5>
                          <p> Just let your body react to the suggestions. Don't try to hard or overanalyze, just let it happen in the moment.</p>
                        </div>
                        <div class="process_num">02</div>
                    </div>

                    <!-- blok -->
                    <div class="af_block" data-aos="fade-up" data-aos-duration="1500">
                        <div class="img">
                          <img src="images/Vrile-blue-icon.webp" alt="image">
                        </div>
                        <div class="text">
                          <h5> Repetition Is The Key </h5>
                          <p> Your subconscious and body will adapt the new suggestions more deeply, the more often you relax and listen to the sessions. </p>
                        </div>
                        <div class="process_num">03</div>
                    </div>

                  </div>

                <!-- app buttons -->
                <div class="ctr_app_btn_block">
                
                    <ul class="app_btn">
            <li>
              <div class="btn_block">
                <a class="nav-link dark_btn" href="https://sensualawakenings.today/download.php">Escape PE</a>
               

              </div>
              

            </li>
            
            
          </ul> 
                </div>

                </div>
              </div>
              <!-- row -->
            </div>
            <!-- listing -->

        </div>
    </div>
  </section>
  <!-- Key Feature Section End -->

 

  <!-- audio sample start  -->
 

  <!-- success stories Section Start -->
  <section class="key_feature_section row_am white_text" id="stories_sec">

  		<!-- side element left  -->
    	<div class="kf_side_element left_side"> <img src="images/thumbup.webp" alt="image"> </div>
    	<!-- side element right  -->
    	<div class="kf_side_element right_side"> <img src="images/like.webp" alt="image"> </div>
    	
      <div class="key_innner">

        <!-- container  -->
        <div class="container">

          <!-- section title  -->
          <div class="section_title" >
            <span class="title_badge">What our listeners say</span>
            <h2>A Small Selection from the thousands of listeners</h2>
            <p>Men just like you are transforming their sex lives. Not with drugs or medication, but by realising they aren't the cause of the issue, and with a little shift in mindset they can transform their passion.</p>
          </div>

          <!-- slider  -->
          <div id="feature_slider" class="owl-carousel owl-theme" data-aos="fade-up" data-aos-duration="1500">

            <!-- testimonial 1  -->
            <div class="item">
              <div class="feature_box">

              

                <div class="txt_blk">
	                <h6>Craig E.</h6>
                  <div class="rating">
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                  </div>
	                <p> <span class="story_bold"> “Just amazing” </span> I have no words to describe how incredible this experience has been for me. My wife is certainly a lot happier now that I can last longer.</p>
            	</div>

              <div class="quote_img">
                <img src="images/quote.webp" alt="image">
              </div>

              </div>
            </div>

            <!-- testimonial 2  -->
            <div class="item">
              <div class="feature_box">

              

                <div class="txt_blk">
	                <h6>Chris L.</h6>
                  <div class="rating">
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                  </div>
	                <p> <span class="story_bold"> “I feel like a man again!" </span> After years of being embarrassed about my performance, I finally feel confident in the bedroom.</p>
            	</div>

              <div class="quote_img">
                <img src="images/quote.webp" alt="image">
              </div>

              </div>
            </div>

            <!-- testimonial 3  -->
            <div class="item">
              <div class="feature_box">

              
                <div class="txt_blk">
	                <h6>Dale C.</h6>
                  <div class="rating">
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                  </div>
	                <p> <span class="story_bold"> "Amazing!” </span> I didn’t want to rely on pills. These audios helped me relax and last twice as long.</p>

            	</div>
              
              <div class="quote_img">
                <img src="images/quote.webp" alt="image">
              </div>

              </div>
            </div>

            <!-- testimonial 4  -->
            <div class="item">
              <div class="feature_box">

              

                <div class="txt_blk">
	                <h6>Jason A.</h6>
                  <div class="rating">
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                    <span><i class="icofont-star"></i></span>
                  </div>
	                <p> <span class="story_bold"> "Magnifique!” </span>I've been busy and low libido lately and boy did you wake my passion up from it's slumber... truly amazing</p>

            	</div>
              
              <div class="quote_img">
                <img src="images/quote.webp" alt="image">
              </div>
              
              </div>
            </div>

          </div>

            <!-- button  -->
          	<div class="ctr_cta">
	          <div class="btn_block">

              <ul class="app_btn">
            <li>
              <div class="btn_block">
                <a class="nav-link dark_btn" href="https://sensualawakenings.today/download.php">Transform Your Pleasure Today</a>

              </div>
              

            </li>
            
            
          </ul> 
		      

	          </div>
			</div>

        </div>
      </div>
  </section>
  <!-- success stories Section End -->

 


    <!-- App-Download-Section-Start -->
    <section class="row_am download_app" id="download_sec">
      <!-- Task Block start -->
      <div class="task_block" data-aos="fade-up" data-aos-duration="1500">

        <!-- row start -->
        <div class="row">
          <div class="col-md-6">
            <!-- task text -->
            <div class="task_text">
              <div class="section_title white_text" data-aos="fade-up" data-aos-duration="1500" data-aos-delay="100">
                <span class="title_badge">Purchase</span>
                <h2>Tranform Your Pleasure Today </h2>
                <p>
                  Download the complete Ride the Edge course for just $17.99.
                </p>
              </div>
              <!-- app buttons -->
              <ul class="app_btn">
            <li>
              <div class="btn_block">
                <a class="nav-link dark_btn" href="https://sensualawakenings.today/download.php">Download the Complete Course</a>

              </div>
              

            </li>
            
            
          </ul> 
            </div>
          </div>
          <div class="col-md-6">
            <!-- task images -->
            <div class="task_img" data-aos="fade-in" data-aos-duration="1500">
              <div class="frame_img">
                <img src="images/COVERFEATURE.webp" alt="image">
              </div>
            </div>
          </div>
        </div>
        <!-- row end -->
      </div>
      <!-- Task Block end -->
    </section>
    <!-- App-Download-Section-end -->

    
   






      <!-- container end -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- FAQ Section End -->

   
      <!-- container end -->
    </section>
    <!-- call to action -->   

    <!-- Footer-Section start -->
    <footer>
       
          <!-- container end -->

          <!-- last footer -->
          <div class="bottom_footer">
            <!-- container start -->
              <div class="container">
                <!-- row start -->
                <div class="row">
                  <div class="col-md-4">
                      <p>© Copyright 2025. Wylde Media Limited All rights reserved.</p>
                  </div>

                  <div class="col-md-4">

                  </div>

                  <div class="col-md-4">
                     
                  </div>
              </div>
              <!-- row end -->
              </div>
              <!-- container end -->
          </div>

        </div>

    </footer>
    <!-- Footer-Section end -->

    <!-- go top button -->
    <div class="go_top" id="Gotop">
      <span><i class="icofont-arrow-up"></i></span>
    </div>

   
</div>
<!-- Wraper End -->

  <!-- Jquery-js-Link -->
  <script src="js/jquery.js"></script>
  <!-- owl-js-Link -->
  <script src="js/owl.carousel.min.js"></script>
  <!-- bootstrap-js-Link -->
  <script src="js/bootstrap.min.js"></script>
  <!-- aos-js-Link -->
  <script src="js/aos.js"></script>
  <!-- Typed Js Cdn -->
  <script src='js/typed.min.js'></script>
  <!-- main-js-Link -->
  <script src="js/main.js"></script>
  
  <!-- Privacy-focused download script -->
  <script src="privacy-download.js"></script>
  
  <!-- Stripe.js -->
  <script src="https://js.stripe.com/v3/"></script>

  <script>
    $("#typed").typed({
      strings: ["Sexual Confidence", "Last Longer", "Deeper Connections", "Intense Pleasure"],
      typeSpeed: 100,
      startDelay: 0,
      backSpeed: 60,
      backDelay: 2000,
      loop: true,
      cursorChar: "|",
      contentType: 'html'
    });

    
    // Fixed Discount Dish JS
    $(document).ready(function () {
      let cardBlock = document.querySelectorAll('.task_block');
      let topStyle = 120;

      cardBlock.forEach((card) => {
        card.style.top = `${topStyle}px`;
        topStyle += 30;
      })

    }
    );

    // Scroll Down Window 
    $(document).ready(function () {
      // Attach a click event handler to the button
      $('#scrollButton').click(function () {
        // Scroll down smoothly 200 pixels from the current position
        $('html, body').animate({ scrollTop: $(window).scrollTop() + 600 }, 800); // Adjust the speed (800ms) as needed
      });
    });

    // Multiple Audio player //
    document.addEventListener('play', function(e){
    var audios = document.getElementsByTagName('audio');
    for(var i = 0, len = audios.length; i < len;i++){
        if(audios[i] != e.target){
            audios[i].pause();
        }
    }
    }, true);

  </script>

  <script>
  // ---- Stripe Configuration ----
  const STRIPE_PUBLISHABLE_KEY = 'pk_test_51PFKKsKVf12scDHYX6FZLF2NYWjwN1SM23oOU1pjXnPyhBrcIvQGruXK9ZCBI0FIv5x7yb4wRUzj6hVYzwnXLj0Z00BZW7ivIO'; // Replace with your actual Stripe publishable key
  const PAYMENT_AMOUNT = 1799; // Amount in cents ($29.99)
  const PRODUCT_NAME = 'VRile Last Longer In Bed Program';
  
  // Initialize Stripe
  const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
  
  // ---- File Download Config ----
  // List of files to download
  const FILE_URLS = [
    "https://d10o3bkrceqyhb.cloudfront.net/Vrile/PE+-+Welcome.mp3",
    "https://d10o3bkrceqyhb.cloudfront.net/Vrile/PE+-+Sexual+Confidence.mp3",
    "https://d10o3bkrceqyhb.cloudfront.net/Vrile/PE+-+Orgasm+Control.mp3",
    "https://d10o3bkrceqyhb.cloudfront.net/Vrile/PE+-+Booster.mp3"
  ];
  const THANK_YOU_URL = "https://sensualawakenings.today/thankyou";
  const REDIRECT_DELAY_MS = 800; // small delay to ensure the download starts

  // carry common tracker params (add or remove keys as you like)
  const PARAM_KEYS_TO_CARRY = [
    "click_id","cid","external_id","campaign_id","ad_id","site_id",
    "utm_source","utm_medium","utm_campaign","utm_term","utm_content"
  ];

  function buildThankYouUrl() {
    const incoming = new URLSearchParams(window.location.search);
    const carry = new URLSearchParams();
    PARAM_KEYS_TO_CARRY.forEach(k => {
      const v = incoming.get(k);
      if (v) carry.set(k, v);
    });
    return carry.toString() ? `${THANK_YOU_URL}?${carry.toString()}` : THANK_YOU_URL;
  }

  // Function to create Stripe Checkout session
  async function createCheckoutSession() {
    try {
      // You'll need to create this endpoint on your server
      const response = await fetch('/create-checkout-session', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          amount: PAYMENT_AMOUNT,
          product_name: PRODUCT_NAME,
          success_url: window.location.origin + '/payment-success.html',
          cancel_url: window.location.href
        })
      });
      
      const session = await response.json();
      
      // Redirect to Stripe Checkout
      const result = await stripe.redirectToCheckout({
        sessionId: session.id
      });
      
      if (result.error) {
        alert('Payment failed: ' + result.error.message);
      }
    } catch (error) {
      console.error('Error creating checkout session:', error);
      alert('Payment system error. Please try again.');
    }
  }

  // Alternative: Use Stripe Payment Element (inline payment form)
  function createInlinePaymentForm() {
    // Create modal overlay
    const modalOverlay = document.createElement('div');
    modalOverlay.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 10000;
      display: flex;
      justify-content: center;
      align-items: center;
    `;
    
    // Create payment form container
    const paymentContainer = document.createElement('div');
    paymentContainer.style.cssText = `
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      position: relative;
    `;
    
    paymentContainer.innerHTML = `
      <button id="closePayment" style="position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
      <h3 style="margin-top: 0; color: #333;">Complete Your Purchase</h3>
      <p style="color: #666; margin-bottom: 20px;">Secure payment for ${PRODUCT_NAME} - $${(PAYMENT_AMOUNT/100).toFixed(2)}</p>
      
      <form id="payment-form">
        <div id="payment-element" style="margin-bottom: 20px;">
          <!-- Stripe Payment Element will be inserted here -->
        </div>
        
        <button id="submit-payment" style="
          width: 100%;
          background: #7c3aed;
          color: white;
          border: none;
          padding: 12px;
          border-radius: 6px;
          font-size: 16px;
          cursor: pointer;
          margin-top: 10px;
        ">
          Pay $${(PAYMENT_AMOUNT/100).toFixed(2)}
        </button>
        
        <div id="payment-messages" style="margin-top: 10px;"></div>
      </form>
    `;
    
    modalOverlay.appendChild(paymentContainer);
    document.body.appendChild(modalOverlay);
    
    // Close button functionality
    document.getElementById('closePayment').addEventListener('click', () => {
      document.body.removeChild(modalOverlay);
    });
    
    // Initialize Stripe Elements (you'd need to create a PaymentIntent on your server)
    // This is a simplified version - you'll need server-side integration
    initializeStripeElements(paymentContainer);
  }

  // Proper Stripe payment processing with Netlify Functions
  async function initializeStripeElements(container) {
    const submitButton = container.querySelector('#submit-payment');
    const messagesDiv = container.querySelector('#payment-messages');
    const paymentElementDiv = container.querySelector('#payment-element');
    
    try {
      // Create PaymentIntent using Netlify Function
      const response = await fetch('/.netlify/functions/create-payment-intent', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          amount: PAYMENT_AMOUNT,
          currency: 'usd',
          product_name: PRODUCT_NAME
        })
      });
      
      if (!response.ok) {
        throw new Error('Failed to create payment intent');
      }
      
      const { client_secret } = await response.json();
      
      // Initialize Stripe Elements
      const elements = stripe.elements({
        clientSecret: client_secret
      });
      
      const paymentElement = elements.create('payment');
      paymentElement.mount('#payment-element');
      
      submitButton.addEventListener('click', async (e) => {
        e.preventDefault();
        
        // Show loading state
        submitButton.disabled = true;
        submitButton.textContent = 'Processing...';
        messagesDiv.innerHTML = '';
        
        // Confirm payment
        const { error, paymentIntent } = await stripe.confirmPayment({
          elements,
          confirmParams: {
            return_url: window.location.origin + '/payment-success.html',
          },
          redirect: 'if_required'
        });
        
        if (error) {
          // Payment failed
          messagesDiv.innerHTML = `<p style="color: red;">Payment failed: ${error.message}</p>`;
          submitButton.disabled = false;
          submitButton.textContent = `Pay $${(PAYMENT_AMOUNT/100).toFixed(2)}`;
        } else if (paymentIntent && paymentIntent.status === 'succeeded') {
          // Payment succeeded
          messagesDiv.innerHTML = '<p style="color: green;">Payment successful! Your downloads will start automatically. Please allow downloads if prompted by your browser.</p>';
          console.log('Payment succeeded, PaymentIntent ID:', paymentIntent.id);
          
          // Store payment success
          localStorage.setItem('sensual_awakenings_paid', 'true');
          localStorage.setItem('sensual_awakenings_payment_id', paymentIntent.id);
          
          setTimeout(() => {
            // Close modal and start downloads
            console.log('About to start downloads...');
            document.body.removeChild(container.parentNode);
            startDownloadThenRedirect();
          }, 2000); // Slightly longer delay to let user read the message
        }
      });
      
    } catch (error) {
      console.error('Error initializing payment:', error);
      paymentElementDiv.innerHTML = '<p style="color: red;">Payment system unavailable. Please try again later.</p>';
      submitButton.style.display = 'none';
    }
  }

  function startDownloadThenRedirect() {
    console.log('startDownloadThenRedirect called, downloading', FILE_URLS.length, 'files');
    
    // Create a download page with direct links (more reliable than forcing downloads)
    const downloadInfo = FILE_URLS.map((url, index) => {
      let filename = decodeURIComponent(url.split('/').pop()) || `VRile-Audio-${index + 1}.mp3`;
      filename = filename.replace(/[^\w\s.-]/gi, '').trim();
      return { url, filename };
    });
    
    // Show download links to user instead of forcing downloads
    showPrivateDownloadLinks(downloadInfo);
    
    // No auto-redirect - let user control when they're done
  }

  function showDownloadLinks(downloadInfo) {
    // Detect if user is on mobile
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    // Create modal overlay for download links
    const modalOverlay = document.createElement('div');
    modalOverlay.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 10000;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    `;
    
    // Create download container
    const downloadContainer = document.createElement('div');
    downloadContainer.style.cssText = `
      background: white;
      padding: 25px;
      border-radius: 15px;
      max-width: 500px;
      width: 100%;
      position: relative;
      text-align: center;
      max-height: 90vh;
      overflow-y: auto;
    `;
    
    let downloadHtml = `
      <h3 style="margin-top: 0; color: #333; font-size: 24px;">🎉 Payment Successful!</h3>
      <p style="color: #666; margin-bottom: 25px; font-size: 16px;">Your VRile Last Longer Program is ready for private download.</p>
    `;
    
    if (isMobile) {
      // Mobile-optimized experience
      downloadHtml += `
        <div style="background: #e0f2fe; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
          <h4 style="color: #0277bd; margin-top: 0; font-size: 18px;">📱 Mobile Download</h4>
          <p style="color: #01579b; margin-bottom: 15px; font-size: 14px;">
            Your files will open in a new tab. Tap and hold any audio player, then select <strong>"Download"</strong> from the menu.
          </p>
          <button onclick="openAllInNewTabs()" 
                  style="
                    width: 100%;
                    padding: 15px;
                    background: #2196f3;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                  ">
            📂 Open All Audio Files
          </button>
        </div>
        
        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
          <p style="color: #e65100; margin: 0; font-size: 13px;">
            � <strong>Alternative:</strong> Enter your email below to receive download links:
          </p>
        </div>
      `;
    } else {
      // Desktop experience with auto-download
      downloadHtml += `
        <div style="background: #f3e5f5; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
          <h4 style="color: #7b1fa2; margin-top: 0;">💻 Desktop Download</h4>
          <button onclick="downloadAllFiles()" 
                  style="
                    width: 100%;
                    padding: 15px;
                    background: #9c27b0;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    margin-bottom: 10px;
                  ">
            🚀 Download All Files Now
          </button>
          <p style="color: #4a148c; margin: 0; font-size: 12px;">
            Files will be saved to your Downloads folder
          </p>
        </div>
      `;
    }
    
    // Email delivery option for both mobile and desktop
    downloadHtml += `
      <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        <h4 style="color: #2e7d32; margin-top: 0;">📧 Email Delivery (Recommended)</h4>
        <p style="color: #1b5e20; margin-bottom: 15px; font-size: 14px;">
          Get secure download links sent directly to your email:
        </p>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <input type="email" 
                 id="userEmail" 
                 placeholder="Enter your email address"
                 style="
                   flex: 1;
                   min-width: 200px;
                   padding: 12px;
                   border: 2px solid #4caf50;
                   border-radius: 6px;
                   font-size: 14px;
                 ">
          <button onclick="sendDownloadEmail()" 
                  style="
                    padding: 12px 20px;
                    background: #4caf50;
                    color: white;
                    border: none;
                    border-radius: 6px;
                    font-weight: bold;
                    cursor: pointer;
                    white-space: nowrap;
                  ">
            � Send Links
          </button>
        </div>
        <div id="emailStatus" style="margin-top: 10px; font-size: 13px;"></div>
      </div>
    `;
    
    // Individual file links as backup
    downloadHtml += `
      <details style="margin-bottom: 20px;">
        <summary style="cursor: pointer; padding: 10px; background: #f5f5f5; border-radius: 5px; font-weight: bold;">
          📁 Individual File Links (Backup Method)
        </summary>
        <div style="margin-top: 15px;">
    `;
    
    downloadInfo.forEach((item, index) => {
      downloadHtml += `
        <div style="margin: 10px 0; padding: 10px; background: #fafafa; border-radius: 5px; text-align: left;">
          <strong style="color: #333; font-size: 14px;">Audio ${index + 1}:</strong><br>
          <a href="${item.url}" 
             target="_blank"
             style="
               color: #1976d2;
               text-decoration: none;
               font-size: 13px;
               word-break: break-all;
             ">
            ${item.filename}
          </a>
        </div>
      `;
    });
    
    downloadHtml += `
        </div>
      </details>
      
      <button onclick="window.location.href='${buildThankYouUrl()}'" 
              style="
                width: 100%;
                padding: 15px;
                background: #6b7280;
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 16px;
                cursor: pointer;
              ">
        ✅ Continue to Thank You Page
      </button>
    `;
    
    downloadContainer.innerHTML = downloadHtml;
    modalOverlay.appendChild(downloadContainer);
    document.body.appendChild(modalOverlay);
  }

  // Mobile-friendly: Open all files in new tabs
  function openAllInNewTabs() {
    FILE_URLS.forEach((url, index) => {
      setTimeout(() => {
        window.open(url, '_blank');
      }, index * 1000); // 1 second delay between each
    });
    
    const button = event.target;
    button.innerHTML = '✅ Files opened! Tap & hold to download each one';
    button.style.background = '#4caf50';
    button.disabled = true;
  }

  // Desktop: Download all files using iframe method
  function downloadAllFiles() {
    FILE_URLS.forEach((url, index) => {
      setTimeout(() => {
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = url;
        document.body.appendChild(iframe);
        
        setTimeout(() => {
          if (document.body.contains(iframe)) {
            document.body.removeChild(iframe);
          }
        }, 3000);
      }, index * 1000);
    });
    
    const button = event.target;
    button.innerHTML = '⏳ Downloads starting...';
    button.disabled = true;
    
    setTimeout(() => {
      button.innerHTML = '✅ Downloads complete! Check your Downloads folder';
      button.style.background = '#4caf50';
    }, 5000);
  }

  // Email delivery function
  function sendDownloadEmail() {
    const email = document.getElementById('userEmail').value;
    const statusDiv = document.getElementById('emailStatus');
    
    if (!email || !email.includes('@')) {
      statusDiv.innerHTML = '<span style="color: #d32f2f;">Please enter a valid email address</span>';
      return;
    }
    
    statusDiv.innerHTML = '<span style="color: #1976d2;">📤 Sending download links...</span>';
    
    // Here you would integrate with your email service (EmailJS, Netlify Forms, etc.)
    // For now, we'll simulate the email sending
    setTimeout(() => {
      statusDiv.innerHTML = '<span style="color: #2e7d32;">✅ Download links sent! Check your email inbox.</span>';
      
      // Store the email for future reference
      localStorage.setItem('sensual_awakenings_email', email);
    }, 2000);
  }

  // Function to handle payment before download
  function handlePurchaseClick(e) {
    e.preventDefault();
    
    // Check if user has already paid (you might store this in localStorage or check with your server)
    const hasPaid = localStorage.getItem('sensual_awakenings_paid') === 'true';
    
    console.log('Purchase clicked, hasPaid:', hasPaid);
    
    if (hasPaid) {
      // User has already paid, proceed with download
      console.log('User has already paid, starting download');
      startDownloadThenRedirect();
    } else {
      // Show payment form
      console.log('User needs to pay, showing payment form');
      createInlinePaymentForm();
      // Alternative: redirect to Stripe Checkout
      // createCheckoutSession();
    }
  }

  // TEST FUNCTION - Remove this in production
  function testDownloadWithoutPayment() {
    console.log('TEST: Starting downloads without payment');
    localStorage.setItem('sensual_awakenings_paid', 'true');
    startDownloadThenRedirect();
  }

  // Intercept ALL links that point to download.php anywhere on the page
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('a[href*="download.php"]').forEach(a => {
      a.addEventListener("click", handlePurchaseClick);
    });
  });
</script>

</body>

</html>